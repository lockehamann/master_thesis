%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:

\documentclass[master,xetex]{thuthesis}
% \documentclass[%
%   bachelor|master|doctor|postdoctor, % mandatory option
%   xetex|pdftex|dvips|dvipdfm, % optional
%   secret,
%   openany|openright,
%   arialtoc,arialtitle]{thuthesis}

% 所有其它可能用到的包都统一放到这里了，可以根据自己的实际添加或者删除。
\usepackage[
addfootnotetoref
]{thutils}

\usepackage[xetex,hyperref]{xcolor}

\usepackage{tikz}
\usetikzlibrary{arrows,calc}
\usetikzlibrary{external}
\tikzexternalize

\newcommand{\TODO}{ \textcolor{blue}{TODO} }
\colorlet{BLUE}{blue}

%--------------------------------------------------------------------------
% 自定义函数

%bracket系列
\newcommand{\bracket}[4]
{\ensuremath{%
\ifthenelse{\equal{#1}{n}}{#3 #2 #4}{}%
\ifthenelse{\equal{#1}{b}}{\bigl#3 #2 \bigr#4}{}%
\ifthenelse{\equal{#1}{B}}{\Bigl#3 #2 \Bigr#4}{}%
\ifthenelse{\equal{#1}{bg}}{\biggl#3 #2 \biggr#4}{}%
\ifthenelse{\equal{#1}{Bg}}{\Biggl#3 #2 \Biggr#4}{}%
}}

\newcommand{\pbracket}[2]{\bracket{#1}{#2}{(}{)}}
\newcommand{\Sbracket}[2]{\bracket{#1}{#2}{[}{]}}
\newcommand{\Bbracket}[2]{\bracket{#1}{#2}{\lbrace}{\rbrace}}
\newcommand{\vbracket}[2]{\bracket{#1}{#2}{|}{|}}

\newcommand{\getsize}[2]
{%
\ifthenelse{\equal{#1}{n}}{#2}{}%
\ifthenelse{\equal{#1}{b}}{\big#2}{}%
\ifthenelse{\equal{#1}{B}}{\Big#2}{}%
\ifthenelse{\equal{#1}{bg}}{\bigg#2}{}%
\ifthenelse{\equal{#1}{Bg}}{\Bigg#2}{}%
}

\newcommand{\pb}[2][n]{\pbracket{#1}{#2}}
\newcommand{\Sb}[2][n]{\Sbracket{#1}{#2}}
\newcommand{\Bb}[2][n]{\Bbracket{#1}{#2}}
\newcommand{\vb}[2][n]{\vbracket{#1}{#2}}

\newcommand{\diff}[1]{\mathrm{d}#1}


\tikzifexternalizing{}
{
\usepackage{eso-pic}
\usepackage{datetime}
\newdateformat{mydate}{\THEYEAR-\twodigit{\THEMONTH}-\twodigit{\THEDAY}}
\newtimeformat{mytime}{\twodigit{\THEHOUR}:\twodigit{\THEMINUTE}}
\settimeformat{mytime}
\AddToShipoutPicture{%
  \parbox[b][\paperheight]{\paperwidth}{%
    \vfill
    \centering%
    \tikzset{external/export next=false}%
    \begin{tikzpicture}
      \coordinate (center) at (current page.center);
      \node [rotate=45,scale=10] at ($(center) +(-1cm,1cm)$) {\textcolor[gray]{0.9}{DRAFT}};
      \node [rotate=45,scale=2.5] at ($(center) +(1cm,-1cm)$)
          {\textcolor[gray]{0.85}{编译时间：\mydate\today\hspace{5pt} \currenttime}};
    \end{tikzpicture}%
    \vfill
  }}
}

\begin{document}

% 定义所有的eps文件在 figures 子目录下
\graphicspath{{figures/}}


%%% 封面部分
\frontmatter
\input{data/cover}
\makecover

% 目录
\tableofcontents

% 符号对照表
\input{data/denotation}


%%% 正文部分
\mainmatter
\include{data/math}
\include{data/program_io}

%%% 其它部分
\backmatter



% 参考文献
\bibliographystyle{thubib}
\bibliography{ref/refs}


% 致谢
\include{data/ack}

% 附录
\begin{appendix}
\include{data/mathbasic}
\end{appendix}

% 个人简历
\include{data/resume}
\end{document}
